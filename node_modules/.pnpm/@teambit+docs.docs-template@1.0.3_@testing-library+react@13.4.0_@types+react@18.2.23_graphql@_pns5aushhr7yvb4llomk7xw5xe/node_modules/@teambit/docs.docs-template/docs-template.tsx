import React, { ComponentType } from 'react';
// @ts-ignore
import { createRoot } from 'react-dom/client';
import { DocsRootProps } from '@teambit/docs';
import { DocsApp } from '@teambit/react.ui.docs-app';

/**
 * a reference to a provider function.
 */
export type DocsProvider = ComponentType<{ children: any }>;

export function createDocsTemplate(Provider: DocsProvider = React.Fragment, docsRootElement?: Element) {
  const DocsTemplate = ({
    componentId,
    docs,
    compositions,
    context,
  }: DocsRootProps) => {
    const rootElm = docsRootElement ?? document.getElementById('root');
    const root = createRoot(rootElm!);
    root.render(
      <Provider>
        <DocsApp
          componentId={componentId}
          docs={docs}
          compositions={compositions}
          context={context}
        />
        ,
      </Provider>
    );
  };
  DocsTemplate.apiObject = true;
  return DocsTemplate;
}
