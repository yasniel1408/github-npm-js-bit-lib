"use strict";
var __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {
    if (k2 === undefined) k2 = k;
    var desc = Object.getOwnPropertyDescriptor(m, k);
    if (!desc || ("get" in desc ? !m.__esModule : desc.writable || desc.configurable)) {
      desc = { enumerable: true, get: function() { return m[k]; } };
    }
    Object.defineProperty(o, k2, desc);
}) : (function(o, m, k, k2) {
    if (k2 === undefined) k2 = k;
    o[k2] = m[k];
}));
var __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {
    Object.defineProperty(o, "default", { enumerable: true, value: v });
}) : function(o, v) {
    o["default"] = v;
});
var __importStar = (this && this.__importStar) || function (mod) {
    if (mod && mod.__esModule) return mod;
    var result = {};
    if (mod != null) for (var k in mod) if (k !== "default" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);
    __setModuleDefault(result, mod);
    return result;
};
Object.defineProperty(exports, "__esModule", { value: true });
exports.RegexExample = exports.LiveExample = void 0;
const react_1 = __importStar(require("react"));
const generate_node_modules_pattern_1 = require("./generate-node-modules-pattern");
function LiveExample() {
    const [text, setText] = (0, react_1.useState)('react,@myorg,some-lib');
    return (react_1.default.createElement("div", null,
        react_1.default.createElement("div", null, "Live example, write packages to exclude separate with a comma:"),
        react_1.default.createElement("input", { value: text, onChange: (e) => setText(e.target.value), style: { width: 300 } }),
        react_1.default.createElement("div", { style: { backgroundColor: '#ededed', padding: 8 } }, text && (0, generate_node_modules_pattern_1.generateNodeModulesPattern)({ packages: text.split(',') }))));
}
exports.LiveExample = LiveExample;
function RegexExample() {
    const [packagesToExclude, setPackagesToExclude] = (0, react_1.useState)('@myorg,react,some-lib');
    const [packageToCheck, setPackageToCheck] = (0, react_1.useState)('@myorg');
    const [excludeComponents, setExcludeComponents] = (0, react_1.useState)(false);
    const [defaultCalculatedRegex, setDefaultCalculatedRegex] = (0, react_1.useState)('');
    const [webpackCalculatedRegexps, setWebpackCalculatedRegexps] = (0, react_1.useState)([]);
    const [defaultRegexResult, setDefaultRegexResult] = (0, react_1.useState)(true);
    const [webpackRegexResult, setWebpackRegexResult] = (0, react_1.useState)(true);
    (0, react_1.useEffect)(() => {
        const pattern = (0, generate_node_modules_pattern_1.generateNodeModulesPattern)({ packages: packagesToExclude.split(','), excludeComponents });
        const webpackPatterns = (0, generate_node_modules_pattern_1.generateNodeModulesPattern)({
            packages: packagesToExclude.split(','),
            excludeComponents,
            target: generate_node_modules_pattern_1.PatternTarget.WEBPACK,
        });
        setDefaultCalculatedRegex(pattern);
        // @ts-ignore
        setWebpackCalculatedRegexps(webpackPatterns);
        const regex = new RegExp(pattern);
        const webpackRegexps = webpackPatterns.map((webpackPattern) => new RegExp(webpackPattern));
        setDefaultRegexResult(regex.test(`node_modules/${packageToCheck}/some-path`));
        setWebpackRegexResult(webpackRegexps.every((webpackRegex) => webpackRegex.test(`Users/aUser/workspace-a/node_modules/${packageToCheck}/package.json`)));
    }, [packagesToExclude, packageToCheck, excludeComponents]);
    return (react_1.default.createElement("div", { style: { width: 500 } },
        react_1.default.createElement("div", null, "Live example, write packages to exclude separate with a comma:"),
        react_1.default.createElement("input", { value: packagesToExclude, onChange: (e) => setPackagesToExclude(e.target.value), style: { width: 300, marginBottom: 12 } }),
        react_1.default.createElement("div", null, "Exclude components:"),
        react_1.default.createElement("input", { type: "checkbox", checked: excludeComponents, onChange: (e) => setExcludeComponents(e.target.checked) }),
        react_1.default.createElement("section", null,
            react_1.default.createElement("h3", null, "Default target (Jest)"),
            react_1.default.createElement("div", null, "Write a package that you want to check with Regex test:"),
            react_1.default.createElement("div", { style: { marginBottom: 12 } },
                react_1.default.createElement("input", { value: "node_modules/", disabled: true }),
                react_1.default.createElement("input", { value: packageToCheck, onChange: (e) => setPackageToCheck(e.target.value) }),
                react_1.default.createElement("input", { value: "/some-path", disabled: true })),
            react_1.default.createElement("div", { style: { backgroundColor: '#ededed', padding: 8 } },
                "regex exclude ",
                packageToCheck,
                " excludeComponents: ",
                excludeComponents.toString(),
                react_1.default.createElement("br", null),
                "regex: ",
                defaultCalculatedRegex,
                react_1.default.createElement("br", null),
                "result: ",
                defaultRegexResult.toString())),
        react_1.default.createElement("section", null,
            react_1.default.createElement("h3", null, "Target Webpack"),
            react_1.default.createElement("div", null, "Write a package that you want to check with Regex test:"),
            react_1.default.createElement("div", { style: { marginBottom: 12 } },
                react_1.default.createElement("input", { value: "Users/aUser/workspace-a/node_modules/", disabled: true }),
                react_1.default.createElement("input", { value: packageToCheck, onChange: (e) => setPackageToCheck(e.target.value) }),
                react_1.default.createElement("input", { value: "/package.json", disabled: true })),
            react_1.default.createElement("div", { style: { backgroundColor: '#ededed', padding: 8 } },
                "regex exclude ",
                packageToCheck,
                " excludeComponents: ",
                excludeComponents.toString(),
                react_1.default.createElement("br", null),
                "regex: ",
                webpackCalculatedRegexps,
                react_1.default.createElement("br", null),
                "result: ",
                webpackRegexResult.toString()))));
}
exports.RegexExample = RegexExample;
//# sourceMappingURL=packages-excluder.composition.js.map