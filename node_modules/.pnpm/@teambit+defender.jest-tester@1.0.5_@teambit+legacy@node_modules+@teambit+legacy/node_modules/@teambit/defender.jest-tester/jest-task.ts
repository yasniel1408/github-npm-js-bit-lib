import { TesterTask, TesterTaskOptions } from '@teambit/defender.tester-task';
import { TaskHandler } from '@teambit/builder';
import { JestTester } from './jest-tester';
import { JestOptions } from './jest-options';

export type JestTaskOptions = JestOptions &
  Pick<TesterTaskOptions, 'description'>;

/**
 * a task for a jest task.
 */
export const JestTask = {
  from: (options: JestTaskOptions): TaskHandler => {
    const name = options.name || 'JestTest';
    const description = options.description || 'testing components using Jest';
    return TesterTask.from({
      ...options,
      name,
      description,
      tester: JestTester.from(options),
    });
  },
};
